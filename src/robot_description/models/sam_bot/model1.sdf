<?xml version="1.0" ?>
<sdf version="1.8">
  <model name="rescue_bot">

    <pose>0 0 0 0 0 0</pose>

    <!-- Base -->
    <link name="base_link">
      <inertial>
        <mass>1</mass>
        <inertia>
          <ixx>0.00505</ixx>
          <iyy>0.00413</iyy>
          <izz>0.00325</izz>
          <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
        </inertia>
        <pose>0 0 0 0 0 0</pose>
      </inertial>
      <collision name="base_col">
        <geometry>
          <box><size>0.42 0.31 0.18</size></box>
        </geometry>
      </collision>
      <visual name="base_vis">
        <geometry>
          <box><size>0.42 0.31 0.18</size></box>
        </geometry>
        <material>
          <ambient>0.09 0.3 0.46 1</ambient>
        </material>
      </visual>
    </link>

    <!-- Wheels -->
    <link name="drivewhl_l_link">
      <inertial>
        <mass>2.5</mass>
        <inertia>
          <ixx>0.0085</ixx>
          <iyy>0.0085</iyy>
          <izz>0.0025</izz>
          <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
        </inertia>
        <pose>0 0 0 1.5708 0 0</pose>
      </inertial>
      <collision name="wheel_col">
        <geometry>
          <cylinder><radius>0.10</radius><length>0.04</length></cylinder>
        </geometry>
      </collision>
      <visual name="wheel_vis">
        <geometry>
          <cylinder><radius>0.10</radius><length>0.04</length></cylinder>
        </geometry>
      </visual>
    </link>

    <link name="drivewhl_r_link">
      <inertial>
        <mass>2.5</mass>
        <inertia>
          <ixx>0.0085</ixx>
          <iyy>0.0085</iyy>
          <izz>0.0025</izz>
          <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
        </inertia>
        <pose>0 0 0 1.5708 0 0</pose>
      </inertial>
      <collision name="wheel_col">
        <geometry>
          <cylinder><radius>0.10</radius><length>0.04</length></cylinder>
        </geometry>
      </collision>
      <visual name="wheel_vis">
        <geometry>
          <cylinder><radius>0.10</radius><length>0.04</length></cylinder>
        </geometry>
      </visual>
    </link>

    <!-- Joints -->
    <joint name="drivewhl_l_joint" type="revolute">
      <parent>base_link</parent>
      <child>drivewhl_l_link</child>
      <pose>-0.12 0.1825 -0.05 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit><lower>-1e16</lower><upper>1e16</upper></limit>
      </axis>
    </joint>

    <joint name="drivewhl_r_joint" type="revolute">
      <parent>base_link</parent>
      <child>drivewhl_r_link</child>
      <pose>-0.12 -0.1825 -0.05 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit><lower>-1e16</lower><upper>1e16</upper></limit>
      </axis>
    </joint>

    <!-- Caster -->
    <link name="front_caster">
      <inertial>
        <mass>0.005</mass>
        <inertia>
          <ixx>0.0001</ixx><iyy>0.0001</iyy><izz>0.0001</izz>
          <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="caster_col">
        <geometry><sphere><radius>0.115</radius></sphere></geometry>
      </collision>
      <visual name="caster_vis">
        <geometry><sphere><radius>0.115</radius></sphere></geometry>
      </visual>
    </link>

    <joint name="caster_joint" type="fixed">
      <parent>base_link</parent>
      <child>front_caster</child>
      <pose>0.14 0 -0.09 0 0 0</pose>
    </joint>

    <!-- IMU -->
    <link name="imu_link">
      <inertial>
        <mass>0.001</mass>
        <inertia><ixx>0.0000833</ixx><iyy>0.0000833</iyy><izz>0.0000833</izz></inertia>
      </inertial>
    </link>

    <joint name="imu_joint" type="fixed">
      <parent>base_link</parent>
      <child>imu_link</child>
      <pose>0 0 0.01 0 0 0</pose>
    </joint>

    <sensor name="imu_sensor" type="imu">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>100</update_rate>
      <imu>
        <angular_velocity><x><noise type="gaussian"><mean>0</mean><stddev>0.0002</stddev></noise></x></angular_velocity>
        <linear_acceleration><x><noise type="gaussian"><mean>0</mean><stddev>0.017</stddev></noise></x></linear_acceleration>
      </imu>
      <always_on>true</always_on>
      <visualize>true</visualize>
    </sensor>

    <!-- LIDAR -->
    <link name="lidar_link">
      <inertial><mass>0.125</mass><inertia><ixx>0.001</ixx><iyy>0.001</iyy><izz>0.001</izz></inertia></inertial>
    </link>

    <joint name="lidar_joint" type="fixed">
      <parent>base_link</parent>
      <child>lidar_link</child>
      <pose>0 0 0.12 0 0 0</pose>
    </joint>

    <sensor name="lidar" type="gpu_lidar">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>5</update_rate>
      <ray>
        <scan>
          <horizontal><samples>360</samples><resolution>1</resolution><min_angle>0</min_angle><max_angle>6.28</max_angle></horizontal>
        </scan>
        <range><min>0.12</min><max>3.5</max><resolution>0.015</resolution></range>
        <noise><type>gaussian</type><mean>0</mean><stddev>0.01</stddev></noise>
      </ray>
      <always_on>true</always_on>
      <visualize>true</visualize>
    </sensor>

    <!-- Camera -->
    <link name="camera_link">
      <inertial><mass>0.035</mass><inertia><ixx>0.001</ixx><iyy>0.001</iyy><izz>0.001</izz></inertia></inertial>
      <visual name="camera_vis">
        <geometry><box><size>0.015 0.13 0.022</size></box></geometry>
      </visual>
      <collision name="camera_coll">
        <geometry><box><size>0.015 0.13 0.022</size></box></geometry>
      </collision>
    </link>

    <joint name="camera_joint" type="fixed">
      <parent>base_link</parent>
      <child>camera_link</child>
      <pose>0.215 0 0.05 0 0 0</pose>
    </joint>

    <sensor name="robot_cam" type="camera">
      <pose>0 0 0 0 0 0</pose>
      <camera>
        <horizontal_fov>1.047</horizontal_fov>
        <image><width>320</width><height>240</height></image>
        <clip><near>0.1</near><far>100</far></clip>
      </camera>
      <update_rate>30</update_rate>
      <always_on>true</always_on>
      <visualize>true</visualize>
    </sensor>

    <!-- ros2_control plugin -->
    <!-- <plugin name="gz::sim::systems::Ros2Control" filename="libgz-sim-ros2-control-system.so"> -->
    <!--   <parameters>$(find robot_description)/config/diff_drive_controller_velocity.yaml</parameters> -->
    <!-- </plugin> -->

  </model>
</sdf>
